define(["angular"],function(e){"use strict";function n(e,n,t,i,o,r,a,c,s,u){e.adminViewMainMenu="statistics",e.adminMode=function(){e.currentUser.isAdmin&&i.path("admin")},e.adminMainViewShift=function(n){switch(n){case"main":case"statistics":e.adminViewMainMenu=n,e.subView="patchNotes"}}}function t(e,n,t,i,o,r,a,c,s){e.subView="patchNotes",e.subViewShift=function(n){switch(n){case"svrAnnouncements":case"patchNotes":case"patches":e.subView=n}}}function i(e,n,t,i,o,r,a,c,s){e.announcementSend=function(n){n.type="announcement",n.date=new Date;var i={_id:e.currentProject._id,keyURL:"/admin/announcement",data:n};c._ajaxRequest("POST",null,i,i.keyURL).then(function(e){_env()._dev?a.info("SENT!"):a.info("OK")},function(e){throw a.error("ERROR: ANNOUNCEMENT  AJAX failed"),new Error("ERROR: ANNOUNCEMENT  AJAX failed")}).catch(function(e){a.error("ERROR: ANNOUNCEMENT  AJAX failed"),t.error("ERROR: ANNOUNCEMENT  AJAX failed",e)})},e.patchNoteSend=function(n){n.type="patch",n.date=new Date,n.version=e.version;var i={_id:e.currentProject._id,keyURL:"/admin/patchNotes",data:n};c._ajaxRequest("POST",null,i,i.keyURL).then(function(e){_env()._dev?a.info("PATCHED!"):a.info("OK")},function(e){throw a.error("ERROR: PATCH Notes AJAX failed"),new Error("ERROR: PATCH Notes AJAX failed")}).catch(function(e){a.error("ERROR: PATCH Notes AJAX failed"),t.error("ERROR: PATCH Notes AJAX failed",e)})}}function o(n,t,i,o,r,a,c,s,u){n.subView="users",n.subViewShift=function(t){switch(t){case"online":n.subView=t,s._ajaxRequest("GET","/getOnline",null,null).then(function(e){n.online=e-1}).catch(function(e){c.error("ERROR: /getOnline AJAX failed"),i.error("ERROR: /getOnline AJAX failed",e)});break;case"users":n.subView=t,s._ajaxRequest("GET","/getOnline",null,null).then(function(e){n.online=e-1}).catch(function(e){c.error("ERROR: /getOnline AJAX failed"),i.error("ERROR: /getOnline AJAX failed",e)}),s._ajaxRequest("GET","/admin/uStats",null,null).then(function(t){e.forEach(t,function(e){e.age=Math.ceil((new Date-new Date(e.registrationDate))/864e5),e.offAge=Math.round((new Date-new Date(e.moment))/864e5)}),n.uStats=t}).catch(function(e){c.error("ERROR: /uStats AJAX failed"),i.error("ERROR: /uStats AJAX failed",e)});break;case"patches":n.subView=t}}}n.$inject=["$scope","$rootScope","$log","$location","$window","$timeout","$interval","toastr","UsersResourceService","AppService"],t.$inject=["$scope","$rootScope","$log","$location","$window","$timeout","toastr","UsersResourceService","AppService"],i.$inject=["$scope","$rootScope","$log","$location","$window","$timeout","toastr","UsersResourceService","AppService"],o.$inject=["$scope","$rootScope","$log","$location","$window","$timeout","toastr","UsersResourceService","AppService"];var r=e.module("adminCtrlModule",["wedServices","authServices"]);return r.controller("adminMainCtrl",n),r.controller("mainCtrl",t),r.controller("patchCtrl",i),r.controller("statisticsCtrl",o),r});
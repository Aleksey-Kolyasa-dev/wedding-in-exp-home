<div class="rest-general-page">
    <!--MONEY SETTINGS *START*-->
    <div class="rest-general-list">
        <div class="info-glass-panel">
            <hr>
            <div>
                <p>Национальная валюта: <span class="rest-info-data">{{currentProject.budget.nationalMoney}}</span></p>
                <p>Курс: <span class="usd-use">1 USD</span> = <span class="rest-info-data">{{currentProject.budget.currency + ' ' + currentProject.budget.nationalMoney}}</span></p>
            </div>
            <hr>
            <div ng-if="currentUser.isAuth">
                <div style="float: right">
                    <button class="btn btn-default"
                            data-target="#editBudgetData"
                            data-toggle="modal"
                            ng-click="budgetChangeTrigger(currentProject.budget.nationalMoney, currentProject.budget.currency)">
                        Edit
                        <span class="glyphicon glyphicon-edit"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!--MONEY SETTINGS  *END*-->


    <!--BUDGET RESULTS REPORT TABLE *START*-->
    <div class="rest-general-list col-xs-8">
        <div class="fiance-side-main" >
        <div class="report-panel">
            <table class="table table-responsive info-glass-panel">

                <thead class="guest-side-table-head">
                    <tr style="color: white">
                        <th class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-check"></span></th>
                        <th>КАТЕГОРИЯ</th>
                        <th class="text-center">ПЛАН РАСХОДОВ</th>
                        <th class="text-center">ОПЛАЧЕННО</th>
                        <th class="text-center">ДОПЛАТИТЬ</th>
                    </tr>
                </thead>

                <tbody>
                    <!--restaurant-->
                    <tr class="guest" ng-if="currentProject.restaurant.total.planTotalUsd">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('restaurant')">РЕСТОРАН</a></td>
                        <td class="text-center">{{currentProject.restaurant.total.planTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.restaurant.total.planTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.restaurant.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.restaurant.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.restaurant.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.restaurant.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--arrangement-->
                    <tr class="guest" ng-if="currentProject.arrangement.total.planUsd">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('arrangement')">ОФОРМЛЕНИЕ</a></td>
                        <td class="text-center">{{currentProject.arrangement.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.arrangement.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.arrangement.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.arrangement.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.arrangement.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.arrangement.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--program-->
                    <tr class="guest" ng-if="currentProject.program.total.planUsd">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('program')">ПРОГРАММА</a></td>
                        <td class="text-center">{{currentProject.program.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.program.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.program.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.program.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.program.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.program.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--filming-->
                    <tr class="guest" ng-if="currentProject.filming.total.planUsd">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('filming')">СЪЁМКА</a></td>
                        <td class="text-center">{{currentProject.filming.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.filming.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.filming.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.filming.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.filming.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.filming.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--registration-->
                    <tr class="guest" ng-if="currentProject.registration.expCollection.length">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('registration')">РЕГИСТРАЦИЯ</a></td>
                        <td class="text-center">{{currentProject.registration.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.registration.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.registration.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.registration.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.registration.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.registration.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--marriage-->
                    <tr class="guest" ng-if="currentProject.marriage.expCollection.length">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('marriage')">ВЕНЧАНИЕ</a></td>
                        <td class="text-center">{{currentProject.marriage.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.marriage.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.marriage.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.marriage.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.marriage.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.marriage.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--transport-->
                    <tr class="guest" ng-if="currentProject.transport.expCollection.length">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('transport')">ТРАНСПОРТ</a></td>
                        <td class="text-center">{{currentProject.transport.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.transport.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.transport.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.transport.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.transport.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.transport.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--dress-->
                    <tr class="guest" ng-if="currentProject.dress.total.planUsd">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('dress')">ДРЕСС-КОД</a></td>
                        <td class="text-center">{{currentProject.dress.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.dress.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.dress.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.dress.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.dress.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.dress.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--party-->
                    <tr class="guest" ng-if="currentProject.party.total.planUsd">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('party')">ВЕЧЕРИНКИ</a></td>
                        <td class="text-center">{{currentProject.party.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.party.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.party.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.party.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.party.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.party.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--other-->
                    <tr class="guest" ng-if="currentProject.other.expCollection.length">
                        <td class="text-center hidden-sm hidden-xs"><span class="glyphicon glyphicon-ok"></span></td>
                        <td><a class="budget-table-list-link" ng-click="projectView('other')">ИННОЕ</a></td>
                        <td class="text-center">{{currentProject.other.total.planNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.other.total.planUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.other.total.paidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.other.total.paidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{currentProject.other.total.restTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{currentProject.other.total.restTotalUsd  | number : 1}} USD</span></td>
                    </tr>

                    <!--FOOTER-->
                    <tr><td colspan="5" style="border-top: 0!important;"></td></tr>
                    <tr class="guest total-footer-data" ng-if="currentProject.budget.total.wedPlanTotalUsd">
                        <td class="hidden-xs hidden-sm"></td>
                        <td class="text-left" colspan="1" style="font-style: italic; font-weight: inherit">ИТОГО:</td>
                        <td class="text-center">{{budgetTotals.wedPlanTotalNat | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{budgetTotals.wedPlanTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{budgetTotals.wedPaidTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{budgetTotals.wedPaidTotalUsd  | number : 1}} USD</span></td>
                        <td class="text-center">{{budgetTotals.wedRestTotalNat  | number : 1}} {{currentProject.budget.nationalMoney}} / <span class="usd-use">{{budgetTotals.wedRestTotalUsd  | number : 1}} USD</span></td>
                    </tr>
                    <!--FOOTER-->
                </tbody>
            </table>
        </div>
    </div>
    </div>
    <!--BUDGET RESULTS REPORT TABLE  *END*-->


    <!--NOTES  *START*-->
    <div ng-if="currentUser.isAuth" class="rest-general-page no-print" style="margin-left: 15px;">
        <div class="rest-general-list">
            <div class="info-glass-panel">
                <hr>
                <div>
                    <p>
                        <button class="btn btn-default" style="margin-right: 15px" data-target="#budgetNotes" data-toggle="modal"> <span class="glyphicon glyphicon-edit"></span></button>
                        Заметки:
                    </p>
                    <ul ng-repeat="note in notesFilter(currentProject.budgetNotes)" style="padding: 0; list-style: none">
                        <li style="font-size: 90%"><span class="rest-info-data">{{'- ' + note}}</span></li>
                    </ul>
                </div>
                <hr>
            </div>
        </div>
    </div>
    <!--NOTES  *END*-->

    <!-- NOTES MODAL *START* -->
    <div id="budgetNotes" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" type="button" data-dismiss="modal">close</button>
                    <h4 class="modal-title"><b>ЗАМЕТКИ</b></h4>
                </div>
                <div class="modal-body wed-modals">
                    <div class="add-new-proj-main">
                        <form>
                            <div>
                                <div class="form-group" style="margin-top: 10px">
                                    <label></label>
                                    <textarea class="form-control" ng-model="currentProject.budgetNotes" placeholder="Каждую новую заметку начинайте с символа (*) и с новой строки"></textarea>
                                </div>
                                <hr>
                                <button type="submit" class="btn btn-success btn-block"
                                        data-dismiss="modal"
                                        ng-click="noteSave()">
                                    <b>СОХРАНИТЬ</b>
                                </button>
                            </div>
                        </form>
                        <div class="deco-farames text-center">
                            <div>
                                <img src="img/frame1.png" alt="deco-frame" style="width: 150px">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- NOTES MODAL *END* -->
</div>


<!-- EDIT BUDGET DATA MODAL *START* -->
<div id="editBudgetData" class="modal fade">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal">close</button>
                <h4 class="modal-title"><b>ИЗМЕНИТЬ</b></h4>
            </div>
            <div class="modal-body wed-modals">
                <div class="add-new-proj-main">
                    <form name="editBudgetGeneralDataForm" novalidate ng-submit="">
                        <div class="">
                            <div class="form-group">
                                <label>Национальная валюта</label>
                                <input class="form-control" ng-model="budget.nationalMoney"
                                       type="text" required ng-minlength='1' list="moneyList" placeholder="UAH, RUB, BLR ..."
                                       name="editBudgetNatName" ng-class="(editBudgetGeneralDataForm.editBudgetNatName.$invalid)? 'invalid-input' : 'null'">
                            </div>
                            <div class="form-group">
                                <label>Курс валют 1 USD</label>
                                <input class="form-control" ng-model="budget.currency" type="number" required ng-minlength='1'
                                       name="editBudgetCurrency" ng-class="(editBudgetGeneralDataForm.editBudgetCurrency.$invalid)? 'invalid-input' : 'null'">
                            </div>
                            <hr>
                            <button type="submit" class="btn btn-success btn-block"
                                    ng-disabled="editBudgetGeneralDataForm.$invalid" data-dismiss="modal"
                                    ng-click="budgetSettingsApply(budget)">
                                <b>ПРИМЕНИТЬ</b>
                            </button>
                        </div>
                    </form>
                    <div class="deco-farames text-center">
                        <div>
                            <img src="img/frame1.png" alt="deco-frame" style="width: 150px">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- EDIT BUDGET DATA MODAL *END* -->

<datalist id="moneyList">
    <option value="UAH">UAH</option>
    <option value="RUB">RUB</option>
    <option value="BLR">BLR</option>
</datalist>